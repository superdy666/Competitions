# 1.比赛目标：
  预测2017.3.13~2017.3.26期间的上海市100个网格的每天早9点~晚22点的车流量
  
# 2.数据：
  ## 2.1 官方提供数据：
   上海市100个网格的经纬度
   2017.1.2~2017.3.12期间，1000俩能源车、1000俩非能源车的车辆行驶的记录，包括实时的经纬度，工作模式等。
    
  ## 2.2 数据处理步骤：
   + 将不在这定义好的100个网格的车辆行驶数据删除
   + 删除同文件名不一致的车辆行驶数据
   + 删除公里数不在【1，100万】的数据
   + 数据整合到每个网格ID、每一天（2017.1.2~2017.3.12）、每个小时的机构
   + 删除春节期间数据
   + 数据集划分：2017.1.2~2017.2.28为训练集、2017.3.1~2017.3.12为验证集
    
# 3.特征工程：
  + 时间变量：星期几、小时。  
  随机选取了一些网格ID，观测他们一周中的每天每个小时的车流量，发现夜间0点~凌晨5点，车辆数非常少，而晚上7点~9点车流量可以达到一个顶峰，这种现象基本同我们的认知一致。而有一些例外的是，周五/周六的夜间0~1点的车流量也很多，大约是某些区域，人们习惯于夜生活导致。如下图所示：  
  ![](https://github.com/superdy666/Competitions/blob/master/BOT_traffic_volume/hour.png)
  + 空间变量：网格ID
    + 将能源车、非能源车分别观测，发现差异较大。
    + 同时，发现各个网格间的差异也很大。某些网格的车流量几乎为零，试图通过给Label网格，在模型中进行识别，但是效果不好，因此在最后对这些网格的预测值进行手动调整。
    + 能源车：![](https://github.com/superdy666/Competitions/blob/master/BOT_traffic_volume/eCar.png)
    + 非能源车：![](https://github.com/superdy666/Competitions/blob/master/BOT_traffic_volume/rCar.png)
  + 早晚高峰：早7~9点、晚5~7点
  + 节假日：周六日
  + 限行时间：早7~10点、晚5~8点
  
# 4.模型算法：
  + 模型拟合中，将能源车、非能源车分别拟合。
  + 树模型：决策树、随机森林、xgboost。多三种模型进行拟合，其中，决策树/随机森林的参数基本没有调整。xgboost的参数进行了微调，主要是subsample/colsample设置为0.7，避免过拟合的问题。三种模型相比，xgboost的效果最好。
  + 模型融合：考虑了融合上面三种模型，但是相关性比较高，因此效果并不算好。
  + 结果优化：由于本次比赛的最终测试集是2000辆车，而在初赛阶段是1000辆车，因此初赛阶段的结果其实是可以拿来进行补充的。
   
# 改善方向：
  + 特征部分：考虑使用更复杂的特征，比如网格ID之间的联系，逻辑是某个网格在同时间车辆多的话，也会影响相邻网格的车流量。或者考虑使用前一天相同时段的车流量，或者提前几个小时的车流量作为特征。


